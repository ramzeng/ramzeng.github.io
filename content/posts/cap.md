---
title: "CAP 与 PACELC 定理"
date: 2023-08-17T20:44:48+08:00
draft: false
tags: ["分布式"]
---
## CAP
### 介绍
CAP 定理指出在一个 **异步** 网络环境中，对于一个分布式读写存储系统来说，只能满足以下三项中的两项，而不可能满足全部三项：
- 一致性（Consistency）：所有节点在同一时间具有相同的数据
- 可用性（Availability）：保证每个请求都能成功响应，但不保证获取的数据为最新数据
- 分区容错性（Partition Tolerance）：节点之间由于网络分区而导致消息丢失的情况下，系统仍能继续正常运行

### 意义
它帮助软件工程师在设计分布式系统时，施加基本的限制，不必浪费时间去构建一个完美的系统，应选择合适的特性来开发分布式系统。

### 两种模式
对于一个分布式系统来说，节点之间是通过网络通信的，只要有网络，必然出现消息延迟或丢失，网络分区故障是必然发生的，所以分区容忍性是一个基本要求。

- AP：保证可用性和分区容错性，当网络出现故障时，系统会继续提供服务，但是不能保证数据一致性。
- CP：保证一致性和分区容错性，当网络出现故障时，系统会拒绝服务，保证数据一致性。

## PACELC
### 介绍
PACELC 定理是对 CAP 定理进行扩展，它指出 CAP 定理忽略分布式系统中的延迟影响是一个重大疏忽，因为延迟在系统运行过程中时刻存在，而网络分区不会一直存在。

在分布式系统存在网络分区的情况下，必须在可用性和一致性之间做出选择，否则，系统在没有网络分区且正常运行的情况下，必须在延迟和一致性中做出选择。

所谓在延迟和一致性之间做选择，例如，如果分布式系统中某个节点的延迟超过 100ms，那么就认为节点失效，不等待该节点确认。

### 扩展模式
- EL：系统正常时，保证延迟，不保证一致性
- EC：系统正常时，保证一致性，不保证延迟
